import { plainToClass } from "class-transformer";
import { validate } from "class-validator"
import Article from "./db/entities/Article"
import { getValidationErrors } from "./utils/validateError";
const plain = {
  title: 'aaa',
  content: 'bbbb',
  // words: 0,
  post: 'data:img/jpg;base64,LS0tCnRpdGxlOiBSZWFjdOa4suafk+WOn+eQhgpkYXRlOiAyMDIwLTExLTIyIDEzOjI3OjA1CnRhZ3M6IFJlYWN0CmNhdGVnb3JpZXM6IFvliY3nq68sIFJlYWN0XQprZXl3b3JkczogUmVhY3QsUmVhY3RET00sUmVhY3RET00ucmVuZGVyLFJlYWN05riy5p+T5Y6f55CGCmRlc2NyaXB0aW9uOiBSZWFjdOWSjFJlYWN0RE9N5bCG5YaF5a655riy5p+T5Yiw6aG16Z2i5LiK55qE6L+H56iLCi0tLQoKIyDkuIDkupvmpoLlv7UKCioqUmVhY3Qg5YWD57Sg77yaKipSZWFjdCBFbGVtZW5077yM6YCa6L+HIGBSZWFjdC5jcmVhdGVFbGVtZW50YCDliJvlu7rvvIzlubPluLjmiJHku6zlhpnnmoQganN45piv6K+t5rOV57OW77yM5pyA57uI6L+Y5piv5Lya6KKrIEJhYmVsIOe8luivkeaIkCBgUmVhY3QuY3JlYXRlRWxlbWVudGDjgIIKCuS+i+Wmgu+8mgoKYGBganN4CmZ1bmN0aW9uIEFwcCgpIHsKICByZXR1cm4gKAogICAgICA8ZGl2PgogICAgICAgIDxoMT5oZWxsbyB3b3JsZDwvaDE+CiAgICAgIDwvZGl2PgogICApOwp9CgpSZWFjdERPTS5yZW5kZXIoCiAgPEFwcCAvPiwKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpCik7CmBgYAoK57uP6L+HIEJhYmVsIOe8luivkeS5i+WQjueahOS7o+eggeS4uu+8mgoKYGBganMKZnVuY3Rpb24gQXBwKCkgewogIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KAogICAgImRpdiIsCiAgICBudWxsLAogICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDEiLCBudWxsLCAiaGVsbG8gd29ybGQiKQogICk7Cn0KClJlYWN0RE9NLnJlbmRlcigKICBSZWFjdC5jcmVhdGVFbGVtZW50KEFwcCwgbnVsbCksCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJvb3QiKQopOwpgYGAKCuaIkeS7rOWPr+S7peaJk+WNsOS4gOS4iyBSZWFjdCDlhYPntKDvvJoKCmBgYGpzeApjb25zb2xlLmxvZyg8ZGl2PjxoMT5oZWxsbyB3b3JsZDwvaDE+PC9kaXY+KTsKYGBgCgohW1JlYWN0IEVsZW1lbnRdKGh0dHBzOi8veGYtYmxvZy1pbWdzLm9zcy1jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20vaW1nL2ltYWdlLTIwMjAxMTIyMTUxMjA2MzA5LnBuZykKCioqUmVhY3Qg6IqC54K577yaKipSZWFjdCDoioLngrnmmK/kuJPpl6jnlKjkuo7muLLmn5PliLAgVUkg55WM6Z2i55qE5a+56LGh77yM5bm25LiU5piv55SxIGBSZWFjdERPTWAg6LSf6LSj5Yib5bu65bm25riy5p+T77yM6K+l5a+56LGh5Y+v5Lul6YCa6L+HIFJlYWN0IOWFg+e0oC/lrZfnrKbkuLLmlbDlrZfnrYnliJvlu7rjgILlubPluLjmiYDor7TnmoQganN4IOWIm+W7uueahOWvueixoeaYr+iZmuaLnyBET03vvIzlhbblrp7lubbkuI3kuKXosKjvvIzov5nnjqnmhI/miY3mmK/nnJ/mraPnmoTomZrmi58gRE9N44CCCgo+IOWunumZheS4iuWcqCBSZWFjdERPTSDkuK1SZWFjdOiKgueCueeahOa6kOeggeihqOekuuW6lOivpeaYryBgUmVhY3RDb21wb25lbnRg77yM5L2G5piv57+76K+R5oiQ57uE5Lu25Lya6YCg5oiQ6K+v6Kej77yM5bCx57qm5a6a56ew5LmL5Li6UmVhY3ToioLngrnlkKfjgIIKCiFbXShodHRwczovL3hmLWJsb2ctaW1ncy5vc3MtY24taGFuZ3pob3UuYWxpeXVuY3MuY29tL2ltZy9pbWFnZS0yMDIwMTEyMjE1NTQyOTM3Ni5wbmcpCgroioLngrnnsbvlnovvvJoKCi0gUmVhY3QgRE9NIOiKgueCue+8muivpeiKgueCueeUsSBgdHlwZWAg5Li65a2X56ym5Liy55qEUmVhY3TlhYPntKDliJvlu7rvvIzkvovlpoLliY3pnaLnmoQgYGRpdmAKLSBSZWFjdCDnu4Tku7boioLngrnvvJror6XoioLngrnnlLEgYHR5cGVgIOS4uuWHveaVsCAvIOexu+eahFJlYWN05YWD57Sg5Yib5bu677yM5L6L5aaC5YmN6Z2i55qEIGBBcHBgCi0gUmVhY3Qg5paH5pys6IqC54K577ya55Sx5a2X56ym5Liy44CB5pWw5a2X5omA5Yib5bu644CCCi0gUmVhY3Qg56m66IqC54K577ya55SxIGBudWxsYOOAgWB1bmRlZmluZWRg44CBYGZhbHNlYOOAgWB0cnVlYCDmiYDliJvlu7rvvIzkvYbmmK/pobXpnaLmsqHmnInmmL7npLrjgIIKLSBSZWFjdCDmlbDnu4ToioLngrnvvJrnlLHkuIDkuKrmlbDnu4TliJvlu7rjgIIKCj4gUmVhY3QgRE9NIOiKgueCueeahOa6kOeggee6p+ihqOekuu+8mmBSZWFjdERPTUNvbXBvbmVudGAKPiBSZWFjdCDnu4Tku7boioLngrnnmoTmupDnoIHnuqfooajnpLrvvJpgUmVhY3RDb21wb3NpdGVDb21wb25lbnRgCj4gUmVhY3Qg5paH5pys6IqC54K555qE5rqQ56CB57qn6KGo56S677yaYFJlYWN0RE9NVGV4dENvbXBvbmVudGAKPiBSZWFjdCDnqbroioLngrnnmoTmupDnoIHnuqfooajnpLrvvJpgUmVhY3RFbXB0eUNvbXBvbmVudGAKCioq6ZyA6KaB5rOo5oSP55qE5piv77yaKirlnKggUmVhY3RET00gMTbniYjmnKzku6XkuIrmnInkupvmib7kuI3liLDkuobvvIzlupTor6XmmK/mnInkupvkuJzopb/lgZrkuobosIPmlbTvvIzov5nkupvnsbvlnovku4XlnKggMTUg54mI5pys5Y+v5om+5b6X5Yiw77yM5L2G5piv5riy5p+T55qE5qC45b+D5bqU6K+l5rKh5pyJ5Y+Y44CCCgrlpoLkvZXpqozor4Hor7TnmoTlr7nkuI3lr7nlkaLvvIzlsIbov5nkupvkuJzopb/nm7TmjqXmiZTliLAgYFJlYWN0RE9NLnJlbmRlcmAg5Ye95pWw5Lit77yM6IO95riy5p+T5bCx5Y+v6KGM44CCCgpgYGBqc3gKUmVhY3RET00ucmVuZGVyKCdoZWxsbyB3b3JsZCcsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpOwoKUmVhY3RET00ucmVuZGVyKHRydWUsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpOwoKUmVhY3RET00ucmVuZGVyKAogICAgWzxBcHAgLz4sICdoZWxsbyB3b3JsZCcsIG51bGwsIDxkaXY+PGgxPuagh+mimDwvaDE+PC9kaXY+XSwgCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpCik7CmBgYAoK5aaC5p6c5omU6L+b5Y675LiA5Liq5pmu6YCa5a+56LGh5Lya55u05o6l5oql6ZSZ77yaCgpgYGBqc3gKUmVhY3RET00ucmVuZGVyKAogIHthOiAxfSwKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpCik7CmBgYAoKIVtdKGh0dHBzOi8veGYtYmxvZy1pbWdzLm9zcy1jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20vaW1nL2ltYWdlLTIwMjAxMTIyMTYxMDQxMjY2LnBuZykKCiMg6aaW5qyh5riy5p+TCgrmiJHku6zlhYjmnaXnnIvnnIvpppbmrKHmuLLmn5PvvIzkuZ/lsLHmmK/ku47pm7bliLDkuIDmuLLmn5PpobXpnaLnmoTov4fnqIvjgIIKCuWkp+iHtOi/h+eoi+eugOWNleadpeivtOWwseaYr++8mgoKMS4g5qC55o2u5Y+C5pWw5Yib5bu66IqC54K577yIYFJlYWN0RE9NLnJlbmRlcmAg5Ye95pWw77yJCjIuIOagueaNruS4jeWQjOeahOiKgueCueWBmuS4jeWQjOeahOaTjeS9nAozLiDnlJ/miJDomZrmi58gRE9NIOagke+8jOW5tuS/neWtmOivpeiZmuaLnyBET00g5qCRCjQuIOWwhuS5i+WJjeeUn+aIkOeahOecn+WunueahERPTeWvueixoe+8iOWcqOi/h+eoizLvvInliqDlhaXliLDlrrnlmajkuK3vvIhgZ2V0RWxlbWV0QnlJZCgncm9vdCcpYO+8ie+8jOS5n+WwseaYr+WunumZhea4suafk+WIsOmhtemdouS4reOAggoK5Y+v5Lul55yL5Yiw5a6e6ZmF5LiK5qC45b+D5bCx5piv5q2l6aqkMu+8jOaIkeS7rOS5n+ivpue7hueci+eci+atpemqpDLnmoTmk43kvZzjgIIKCioq5q2l6aqkMueahOWkp+iHtOi/h+eoi++8mioqCgoxLiDmlofmnKzoioLngrnvvJrpgJrov4cgYGRvY3VtZW50LmNyZWF0ZVRleHROb2RlYCDliJvlu7rnnJ/lrp7nmoTmlofmnKzoioLngrkKMi4g56m66IqC54K577ya5LuA5LmI6YO95LiN5YGaCjMuIOaVsOe7hOiKgueCue+8mumBjeWOhuaVsOe7hO+8jOWvueS6juaVsOe7hOavj+S4gOmhuei/m+ihjOmAkuW9kuaTjeS9nO+8iOWbnuWIsOesrDHmraXvvIznm7TliLDpgY3ljobnu5PmnZ/vvIkKNC4gRE9NIOiKgueCue+8mumAmui/hyBgZG9jdW1lbnQuY3JlYXRlRWxlbWVudGAg5Yib5bu655yf5a6e55qERE9N5a+56LGh77yM5bm26K6+572u55u45bqU55qE5LiA5Lqb5bGe5oCn77yM54S25ZCO6YGN5Y6G5a+55bqUIFJlYWN05YWD57Sg55qEIGBjaGlsZHJlbmAg5bGe5oCn77yM6YCS5b2S5pON5L2cCjUuIOe7hOS7tuiKgueCuQoJLSDlh73mlbDnu4Tku7bvvJrosIPnlKjlh73mlbDvvIzlsIbor6Xlh73mlbDnmoTov5Tlm57nu5Pmnpzov5vooYzpgJLlvZLmk43kvZwKCS0g57G757uE5Lu277yaCgkJMS4g5Yib5bu66K+l57G755qE5a6e5L6LCgkJMi4g6LCD55So5a+56LGh55qE55Sf5ZG95ZGo5pyf5pa55rOV77yaYHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNgCgkJMy4g6LCD55SoIGByZW5kZXJgIOaWueazle+8jOWwhuWHveaVsOeahOi/lOWbnue7k+aenOi/m+ihjOmAkuW9kuaTjeS9nAoJCTQuIOWwhuivpee7hOS7tueahCBgY29tcG9uZW50RGlkTW91bnRgIOWKoOWFpeS4gOS4quaJp+ihjOmYn+WIl++8jOW9k+mhtemdoua4suafk+WujOavleaJp+ihjOivpemYn+WIl+S4reeahOWHveaVsAoK6L+Z5YW25Lit55Sf5oiQ55qE6YKj5Lqb55yf5a6eIERPTSDlr7nosaHkvJrlnKjov5nov4fnqIvkuK3lvaLmiJBET03moJHvvIzmnIDlkI7nu5/kuIDlsIbmoLnoioLngrnliqDlhaXliLAgYGdldEVsZW1lbnRCeUlkKCdyb290JylgIOS4reOAggoK5p2l55yL5LiA5Liq5L6L5a2Q5ZCn77yaCgoqKkFwcC5qc3gqKgoKYGBganN4CmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCcKCmZ1bmN0aW9uIENtcCgpIHsKICAgIHJldHVybiAoCiAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGgyPkNtcCBDb21wb25lbnQ8L2gyPgogICAgICAgICAgICB7W1siYWJjIiwgbnVsbCwgPHAga2V5PXsxfT7mrrXokL08L3A+XV19CiAgICAgICAgPC9kaXY+CiAgICApCn0KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCBleHRlbmRzIENvbXBvbmVudCB7CiAgICByZW5kZXIoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxoMT5BcHAgQ29tcG9uZW50PC9oMT4KICAgICAgICAgICAgICAgIDxDbXAgLz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgKQogICAgfQp9CmBgYAoKKippbmRleC5qc3gqKgoKYGBganN4CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nOwppbXBvcnQgQXBwIGZyb20gJy4vQXBwJzsKClJlYWN0RE9NLnJlbmRlcigKICAgIDxBcHAgLz4sCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpCik7CmBgYAoK55Sf5oiQ55qE6Jma5oufRE9N5qCR5aSn6Ie05piv6L+Z5qC377yaCgo8aW1nIHNyYz0iaHR0cHM6Ly94Zi1ibG9nLWltZ3Mub3NzLWNuLWhhbmd6aG91LmFsaXl1bmNzLmNvbS9pbWcvJUU4JTk5JTlBJUU2JThCJTlGRE9tJUU2JUEwJTkxLnBuZyIgc3R5bGU9Inpvb206IDUwJTsiIC8+Cgo=',
  aaaa: 'aaaaaaaa',
  views: 10000,
  categories: [['1']],
  tags: [[1]]
}

const article = plainToClass(
  Article,
  plain,
  // 去除 plain-object 中额外的属性
  { excludeExtraneousValues: true }
);

console.log(article);



validate(article).then(errs => {
  console.log(getValidationErrors(errs));
})


